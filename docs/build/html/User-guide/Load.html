<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Load &mdash; MapReader 0.3.3 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Annotate" href="Annotate.html" />
    <link rel="prev" title="Download" href="Download.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> MapReader
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Install.html">Installation instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Input-guidance.html">Input guidance</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="User-guide.html">User Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Download.html">Download</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Load</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#load-images-and-metadata">Load images (and metadata)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#patchify">Patchify</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visualise">Visualise</a></li>
<li class="toctree-l3"><a class="reference internal" href="#further-analysis-visualisation">Further analysis/visualisation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="Annotate.html">Annotate</a></li>
<li class="toctree-l2"><a class="reference internal" href="Train.html">Learn</a></li>
<li class="toctree-l2"><a class="reference internal" href="Post-process.html">Post-process</a></li>
<li class="toctree-l2"><a class="reference internal" href="Worked-examples.html">Worked examples</a></li>
<li class="toctree-l2"><a class="reference internal" href="User-guide.html#gallery">Gallery</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">MapReader</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="User-guide.html">User Guide</a></li>
      <li class="breadcrumb-item active">Load</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/User-guide/Load.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="load">
<h1>Load<a class="headerlink" href="#load" title="Permalink to this heading"></a></h1>
<p>MapReader’s <code class="docutils literal notranslate"><span class="pre">load</span></code> subpackage is used to load, visualise and patchify images (e.g. maps) saved locally.</p>
<section id="load-images-and-metadata">
<h2>Load images (and metadata)<a class="headerlink" href="#load-images-and-metadata" title="Permalink to this heading"></a></h2>
<p>First, images (e.g. png, jpeg, tiff or geotiff files) can be loaded in using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">mapreader</span> <span class="kn">import</span> <span class="n">loader</span>
<span class="n">my_files</span> <span class="o">=</span> <span class="n">loader</span><span class="p">(</span><span class="s2">&quot;./path/to/files&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This creates a mapImages object (<code class="docutils literal notranslate"><span class="pre">my_files</span></code>) which contains information about your images.
To see the contents of this object, use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="n">my_files</span><span class="p">)</span>
</pre></div>
</div>
<p>You will see that your images are labelled as either parents or children.
This naming structure is useful later on in the MapReader pipeline as it allows you to distinguish parent images (i.e. whole images) and child images (i.e. patches) as well as identify which parent image each patch has come from.</p>
<p>If your image files contain metadata (e.g. if you have loaded geotiff files), you can add this into your mapImages object using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_files</span><span class="o">.</span><span class="n">addGeoInfo</span><span class="p">()</span>
</pre></div>
</div>
<p>Or, if you have a separate metadata (e.g. in the form of a pd.DataFrame or a .csv file), use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_files</span><span class="o">.</span><span class="n">add_metadata</span><span class="p">(</span><span class="n">metadata</span><span class="o">=</span><span class="s2">&quot;./path/to/metadata.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="patchify">
<h2>Patchify<a class="headerlink" href="#patchify" title="Permalink to this heading"></a></h2>
<p>Once you’ve loaded in all your data, you’ll then need to patchify your images.
This can be done using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_files</span><span class="o">.</span><span class="n">sliceAll</span><span class="p">()</span>
</pre></div>
</div>
<p>By default, this slices images into 100 x 100 pixel patches which are saved in a newly created directory called <code class="docutils literal notranslate"><span class="pre">./tests</span></code>. This save directory can be changed by specifying <code class="docutils literal notranslate"><span class="pre">path_save</span></code>.</p>
<p>e.g. :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_files</span><span class="o">.</span><span class="n">sliceAll</span><span class="p">(</span><span class="n">path_save</span><span class="o">=</span><span class="s2">&quot;./path/to/directory&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If you have loaded geographic coordinates into your mapImages object, you can specify <code class="docutils literal notranslate"><span class="pre">method</span></code> and <code class="docutils literal notranslate"><span class="pre">slice_size</span></code> to slice your images by meters instead of pixels.</p>
<p>e.g. :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_files</span><span class="o">.</span><span class="n">sliceAll</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s2">&quot;meters&quot;</span><span class="p">,</span> <span class="n">slice_size</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>After patchifying, you’ll see that <code class="docutils literal notranslate"><span class="pre">print(my_files)</span></code> shows you have both parents and children (patches).
To view an iterable list of these, you can use the <code class="docutils literal notranslate"><span class="pre">.list_parents()</span></code> and <code class="docutils literal notranslate"><span class="pre">.list_children()</span></code> methods:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">parent_list</span><span class="o">=</span><span class="n">my_files</span><span class="o">.</span><span class="n">list_parents</span><span class="p">()</span>
<span class="n">child_list</span><span class="o">=</span><span class="n">my_files</span><span class="o">.</span><span class="n">list_children</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">parent_list</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">child_list</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">5</span><span class="p">])</span> <span class="c1"># too many to print them all!</span>
</pre></div>
</div>
<p>Or, to view these in a dataframe, use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">parent_df</span><span class="p">,</span> <span class="n">patch_df</span> <span class="o">=</span> <span class="n">my_files</span><span class="o">.</span><span class="n">convertImages</span><span class="p">()</span>
<span class="n">patch_df</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>parent and patch dataframes will not automatically update so you may want to run this command again if you add new information into your mapImages object.</p>
</div>
</section>
<section id="visualise">
<h2>Visualise<a class="headerlink" href="#visualise" title="Permalink to this heading"></a></h2>
<p>To view a random sample of your images, use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_files</span><span class="o">.</span><span class="n">show_sample</span><span class="p">(</span><span class="n">num_samples</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/show_sample_parent.png"><img alt="../_images/show_sample_parent.png" src="../_images/show_sample_parent.png" style="width: 400px;" /></a>
<p>By default, this will show you a random sample of your parent images.
To see a random sample of your patches (child images) use the <code class="docutils literal notranslate"><span class="pre">tree_level=&quot;child&quot;</span></code> argument:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_files</span><span class="o">.</span><span class="n">show_sample</span><span class="p">(</span><span class="n">num_samples</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">tree_level</span><span class="o">=</span><span class="s2">&quot;child&quot;</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/show_sample_child.png"><img alt="../_images/show_sample_child.png" src="../_images/show_sample_child.png" style="width: 400px;" /></a>
<p>It can also be helpful to see your patches (child images) in the context of their parent image. To do this use the <code class="docutils literal notranslate"><span class="pre">.show()</span></code> method.</p>
<p>e.g. :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_files</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">child_list</span><span class="p">[</span><span class="mi">250</span><span class="p">:</span><span class="mi">300</span><span class="p">])</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/show.png"><img alt="../_images/show.png" src="../_images/show.png" style="width: 400px;" /></a>
<p>or</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">files_to_show</span><span class="o">=</span><span class="p">[</span><span class="n">child_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">child_list</span><span class="p">[</span><span class="mi">350</span><span class="p">],</span> <span class="n">child_list</span><span class="p">[</span><span class="mi">400</span><span class="p">]]</span>
<span class="n">my_files</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">files_to_show</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/show_list.png"><img alt="../_images/show_list.png" src="../_images/show_list.png" style="width: 400px;" /></a>
<p>This will show you your chosen patches, by default highlighted with red borders, in the context of their parent image.</p>
<p>You may also want to see all the patches created from one of your parent images.
This can be done using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_files</span><span class="o">.</span><span class="n">show_par</span><span class="p">(</span><span class="n">parent_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/show_par.png"><img alt="../_images/show_par.png" src="../_images/show_par.png" style="width: 400px;" /></a>
</section>
<section id="further-analysis-visualisation">
<h2>Further analysis/visualisation<a class="headerlink" href="#further-analysis-visualisation" title="Permalink to this heading"></a></h2>
<p>If you have loaded geographic coordinates into your mapImages object, you may want to calculate the coordinates of your patches. The <code class="docutils literal notranslate"><span class="pre">.add_center_coord()</span></code> method can used to do this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_files</span><span class="o">.</span><span class="n">add_center_coord</span><span class="p">()</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">.calc_pixel_stats()</span></code> method can be used to calculate means and standard deviations of pixel intensites of each patch (child image) and parent image:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_files</span><span class="o">.</span><span class="n">calc_pixel_stats</span><span class="p">()</span>
</pre></div>
</div>
<p>Specific values (e.g. ‘mean_pixel_RGB’) can be visualised using the <code class="docutils literal notranslate"><span class="pre">.show()</span></code> and <code class="docutils literal notranslate"><span class="pre">.show_par()</span></code> methods by specifying the <code class="docutils literal notranslate"><span class="pre">value</span></code>, <code class="docutils literal notranslate"><span class="pre">vmin</span></code> and <code class="docutils literal notranslate"><span class="pre">vmax</span></code> arguments.</p>
<p>e.g. :</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">value</span><span class="o">=</span><span class="s1">&#39;mean_pixel_RGB&#39;</span>
<span class="n">vmin</span><span class="o">=</span><span class="n">patch_df</span><span class="p">[</span><span class="n">value</span><span class="p">]</span><span class="o">.</span><span class="n">min</span><span class="p">()</span>
<span class="n">vmax</span><span class="o">=</span><span class="n">patch_df</span><span class="p">[</span><span class="n">value</span><span class="p">]</span><span class="o">.</span><span class="n">max</span><span class="p">()</span>

<span class="n">my_files</span><span class="o">.</span><span class="n">show_par</span><span class="p">(</span><span class="n">parent_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/show_par_RGB.png"><img alt="../_images/show_par_RGB.png" src="../_images/show_par_RGB.png" style="width: 400px;" /></a>
<p>You may also want to specify the <code class="docutils literal notranslate"><span class="pre">alpha</span></code> argument, which sets the transparency of your plotted values. Lower <code class="docutils literal notranslate"><span class="pre">alpha</span></code> values allow you to see the parent image underneath:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">my_files</span><span class="o">.</span><span class="n">show_par</span><span class="p">(</span><span class="n">parent_list</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">value</span><span class="o">=</span><span class="n">value</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/show_par_RGB_0.5.png"><img alt="../_images/show_par_RGB_0.5.png" src="../_images/show_par_RGB_0.5.png" style="width: 400px;" /></a>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="Download.html" class="btn btn-neutral float-left" title="Download" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Annotate.html" class="btn btn-neutral float-right" title="Annotate" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, RW.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>